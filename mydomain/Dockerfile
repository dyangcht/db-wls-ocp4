FROM domain-home-in-image:12.2.1.4	# generated by the create-domain.sh
MAINTAINER Monica Riccelli <monica.riccelli@oracle.com>

ARG APPLICATION_NAME="${APPLICATION_NAME:-sample}"
ARG APPLICATION_PKG="${APPLICATION_PKG:-archive.zip}"

# Define variables
ENV APP_NAME="${APPLICATION_NAME}" \
    APP_FILE="${APPLICATION_NAME}.ear" \
    APP_PKG_FILE="${APPLICATION_PKG}"

# Copy files and deploy application in WLST Offline mode
COPY container-scripts/* /u01/oracle/
COPY $APP_PKG_FILE /u01/oracle/

RUN cd /u01/oracle & $JAVA_HOME/bin/jar xf /u01/oracle/$APP_PKG_FILE && \
    /u01/oracle/deployAppToDomain.sh

# Define default command to start bash.
CMD ["startAdminServer.sh"]
